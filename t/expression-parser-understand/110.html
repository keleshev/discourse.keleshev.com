<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Expression parser understand - Compiling to Assembly from Scratch</title>
    <meta name="description" content="How to better understand this pic. Is this ocml grammar ?">
    <meta name="generator" content="Discourse 2.6.0.beta1 - https://github.com/discourse/discourse version b9174c8e8ab7e0a5fdb782cd8625d26475ce777e">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/32d34deafc2d620b3f4b218b560d5d5f544183dd_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/32d34deafc2d620b3f4b218b560d5d5f544183dd_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="110.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://discourse.keleshev.com","potentialAction":{"@type":"SearchAction","target":"https://discourse.keleshev.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Compiling to Assembly from Scratch Search">

      <link href="../../stylesheets/desktop_2858fe1a7e1c2fdbfeb3eae8f9a8f12e081caaf6.css%3F__ws=discourse.keleshev.com.css" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="../../stylesheets/desktop_theme_2_223f7359fb9f6a7678616c181dc93a609ee33714.css%3F__ws=discourse.keleshev.com.css" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Expression parser understand&#39;" href="110.rss" />
    <meta property="og:site_name" content="Compiling to Assembly from Scratch" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://discourse.keleshev.com/uploads/default/optimized/1X/b572bfe53c97260c6fff2ec870f7fc3c18263ebe_2_1024x523.png" />
<meta property="og:image" content="https://discourse.keleshev.com/uploads/default/optimized/1X/b572bfe53c97260c6fff2ec870f7fc3c18263ebe_2_1024x523.png" />
<meta property="og:url" content="https://discourse.keleshev.com/t/expression-parser-understand/110" />
<meta name="twitter:url" content="https://discourse.keleshev.com/t/expression-parser-understand/110" />
<meta property="og:title" content="Expression parser understand" />
<meta name="twitter:title" content="Expression parser understand" />
<meta property="og:description" content="How to better understand this pic. Is this ocml grammar ?" />
<meta name="twitter:description" content="How to better understand this pic. Is this ocml grammar ?" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="7 ❤" />
<meta property="article:published_time" content="2021-01-03T14:02:26+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg" alt="Compiling to Assembly from Scratch" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="110.html">Expression parser understand</a>
    </h1>


  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/gengjiawen'><span itemprop='name'>gengjiawen</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">

            <link itemprop="image" href="../../uploads/default/original/1X/b572bfe53c97260c6fff2ec870f7fc3c18263ebe.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-03T14:02:26Z' class='post-time'>
                January 3, 2021,  2:02pm
              </time>
              <meta itemprop='dateModified' content='2021-01-03T14:02:26Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>How to better understand this pic. Is this ocml grammar ?</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/1X/b572bfe53c97260c6fff2ec870f7fc3c18263ebe.png" data-download-href="https://discourse.keleshev.com/uploads/default/b572bfe53c97260c6fff2ec870f7fc3c18263ebe" title="image"><img src="../../uploads/default/optimized/1X/b572bfe53c97260c6fff2ec870f7fc3c18263ebe_2_690x352.png" alt="image" data-base62-sha1="pTagRDnLJIhxFwSaPQXmI4gmrz8" width="690" height="352" srcset="../../uploads/default/optimized/1X/b572bfe53c97260c6fff2ec870f7fc3c18263ebe_2_690x352.png, ../../uploads/default/optimized/1X/b572bfe53c97260c6fff2ec870f7fc3c18263ebe_2_1035x528.png 1.5x, ../../uploads/default/optimized/1X/b572bfe53c97260c6fff2ec870f7fc3c18263ebe_2_1380x704.png 2x" data-small-upload="https://discourse.keleshev.com/uploads/default/optimized/1X/b572bfe53c97260c6fff2ec870f7fc3c18263ebe_2_10x10.png"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1507×770 50 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/beefok'><span itemprop='name'>beefok</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-04T15:48:00Z' class='post-time'>
                January 4, 2021,  3:48pm
              </time>
              <meta itemprop='dateModified' content='2021-01-04T15:48:00Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>With the exception of ‘/’ instead of ‘|’ and ‘&lt;-’ instead of ‘=’, this is just EBNF <a href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form#:~:text=In%20computer%20science%2C%20extended%20Backus,as%20a%20computer%20programming%20language" rel="nofollow noopener">https://en.wikipedia.org/wiki/Extended_Backus–Naur_form#:~:text=In%20computer%20science%2C%20extended%20Backus,as%20a%20computer%20programming%20language</a>.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/keleshev'><span itemprop='name'>keleshev</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-04T15:50:09Z' class='post-time'>
                January 4, 2021,  3:50pm
              </time>
              <meta itemprop='dateModified' content='2021-01-04T15:50:09Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for the question, <a class="mention" href="https://discourse.keleshev.com/u/gengjiawen">@gengjiawen</a>!</p>
<p>It looks like this is from section <em>6.4 Expression grammar</em>. This grammar corresponds to the <em>expression</em> part of the subset of TypeScript/JavaScript that we are trying to implement in the book. It uses PEG notation (Parsing Expression Grammar). You might have heard of other similar notations such as EBNF, for example. The previous chapter 5 introduced parsing combinators and along with a light introduction of the PEG notation. <em>(Perhaps, too light?)</em></p>
<p>The following paper (PDF) introduced PEG and its notation and is very approachable if you want to have dive into this area: <a href="https://bford.info/pub/lang/peg.pdf">https://bford.info/pub/lang/peg.pdf</a>.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/beefok'><span itemprop='name'>beefok</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-04T15:52:39Z' class='post-time'>
                January 4, 2021,  3:52pm
              </time>
              <meta itemprop='dateModified' content='2021-01-04T15:52:39Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Ah PEG, gotcha! It is exactly the correct syntax, haha.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/keleshev'><span itemprop='name'>keleshev</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-04T15:57:21Z' class='post-time'>
                January 4, 2021,  3:57pm
              </time>
              <meta itemprop='dateModified' content='2021-01-04T15:57:21Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a class="mention" href="https://discourse.keleshev.com/u/beefok">@beefok</a>, yeah PEG and EBNF are very similar. For mundane academic reasons I decided to use PEG for the book, even though EBNF is generally more familiar.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/gengjiawen'><span itemprop='name'>gengjiawen</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-05T08:28:31Z' class='post-time'>
                January 5, 2021,  8:28am
              </time>
              <meta itemprop='dateModified' content='2021-01-05T08:28:31Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I find this very hard to understand. Maybe add more context and give an introduction here here will make it easier to read.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/keleshev'><span itemprop='name'>keleshev</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-01-05T15:09:13Z'>
              <time itemprop='dateModified' datetime='2021-01-05T15:11:10Z' class='post-time'>
                January 5, 2021,  3:11pm
              </time>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for your feedback, <a class="mention" href="https://discourse.keleshev.com/u/gengjiawen">@gengjiawen</a>. I will give it some more thought and will try to improve this part, but this will probably take some time. In the meanwhile feel free to post more questions.</p>
<p>Here’s some informal description of what this PEG grammar stands for. It has operators similar to regular expressions: <code>*</code> means repetition, <code>?</code> means optionality. However, there are differences too. Notably, strings must be quoted. This way <code>"hi" ?</code> means a grammar that corresponds to either <code>hi</code> or an empty string.</p>
<p>Grammar rules are just names for existing expressions. If you define a rule <code>hi &lt;- "hi" ?</code>, then you can write just <code>hi</code> instead of <code>"hi" ?</code>.</p>
<blockquote>
<p>There are parser tools that generate parsers from this kind of grammar description, however, in the book we implement the parser manually (using parser combinators), however, it still helps (at least to me) to think about grammars first before jumping to implement the parser combinators.</p>
</blockquote>
<p>The expression grammar from the book doesn’t use quoted strings. Instead, it follows this convention that simplest rules (our pseudo-tokens) are capitalized. They are defined using the <code>token</code> parser combinator.</p>
<pre><code class="lang-auto">      args &lt;- (expression (COMMA expression)*)?
      call &lt;- ID LEFT_PAREN args RIGHT_PAREN
      atom &lt;- call / ID / NUMBER
            / LEFT_PAREN expression RIGHT_PAREN
      unary &lt;- NOT? atom
      product &lt;- unary ((STAR / SLASH) unary)*
      sum &lt;- product ((PLUS / MINUS) product)*
      comparison &lt;- sum ((EQUAL / NOT_EQUAL) sum)*
      expression &lt;- comparison
</code></pre>
<p>This grammar is pretty involved, but the book goes over each of the rule and shows how to implement it using our parser combinators.</p>
<p>Let’s look at one of the rules, <code>call</code>:</p>
<pre><code class="lang-auto">call &lt;- ID LEFT_PAREN args RIGHT_PAREN
</code></pre>
<p>It says that a call starts with an identifier, followed by an opening parenthesis, then arguments (defined separately), then a closing parenthesis. This way <code>f(x)</code> fits our <code>call</code> rule, but <code>f[x]</code> does not.</p>
<p>The implementation of <code>call</code> from the book, using parser combinators:</p>
<pre><code class="lang-javascript">      // call &lt;- ID LEFT_PAREN args RIGHT_PAREN
      let call =
        ID.and(LEFT_PAREN.and(args.and(RIGHT_PAREN)))
</code></pre>
<p>Hope this helps! If not, let me know. I appreciate all the feedback.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/gengjiawen'><span itemprop='name'>gengjiawen</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-11T03:47:50Z' class='post-time'>
                January 11, 2021,  3:47am
              </time>
              <meta itemprop='dateModified' content='2021-01-11T03:47:50Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I still find this a bits of hard to understand. Maybe we can apply tdd here.</p>
<p>Like write a simple test case for</p>
<blockquote>
<p>args &lt;- (expression (COMMA expression)*)?</p>
</blockquote>
<p>This maybe easier to understand.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/gengjiawen'><span itemprop='name'>gengjiawen</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-11T03:49:41Z' class='post-time'>
                January 11, 2021,  3:49am
              </time>
              <meta itemprop='dateModified' content='2021-01-11T03:49:41Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Also I think I need to understand PEG to move on. Any other material other than the pdf essay.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/keleshev'><span itemprop='name'>keleshev</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-11T18:48:00Z' class='post-time'>
                January 11, 2021,  6:48pm
              </time>
              <meta itemprop='dateModified' content='2021-01-11T18:48:00Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>You can find some test that might be helpful in the book’s repo:</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/keleshev/compiling-to-assembly-from-scratch/blob/572074fcf78b8c3fec30a992767e3f9fbd50ba98/compiler.ts#L755-L770" target="_blank">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/keleshev/compiling-to-assembly-from-scratch/blob/572074fcf78b8c3fec30a992767e3f9fbd50ba98/compiler.ts#L755-L770" target="_blank">keleshev/compiling-to-assembly-from-scratch/blob/572074fcf78b8c3fec30a992767e3f9fbd50ba98/compiler.ts#L755-L770</a></h4>
<pre class="onebox"><code class="lang-ts"><ol class="start lines" start="755" style="counter-reset: li-counter 754 ;">
<li>test("Expression parser", () =&gt; {</li>
<li>  console.log();</li>
<li>  let [x, y, z] = [new Id('x'), new Id('y'), new Id('z')];</li>
<li>  let parse = (string) =&gt; expression.parseStringToCompletion(string);</li>
<li>
</li><li>  console.assert(parse('x + y + z').equals(new Add(new Add(x, y), z)));</li>
<li>  console.assert(parse('x + y * z').equals(new Add(x, new Multiply(y, z))));</li>
<li>  console.assert(parse('x * y + z').equals(new Add(new Multiply(x, y), z)));</li>
<li>  console.assert(parse('(x + y) * z').equals(new Multiply(new Add(x, y), z)));</li>
<li>  console.assert(parse('x == y + z').equals(new Equal(x, new Add(y, z))));</li>
<li>  console.assert(parse('x + y == z').equals(new Equal(new Add(x, y), z)));</li>
<li>
</li><li>  console.assert(parse('f()').equals(new Call('f', [])));</li>
<li>  console.assert(parse('f(x)').equals(new Call('f', [x])));</li>
<li>  console.assert(parse('f(x, y, z)').equals(new Call('f', [x, y, z])));</li>
<li>});</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>If you take <code>call</code>, as an example:</p>
<pre><code class="lang-javascript">      // call &lt;- ID LEFT_PAREN args RIGHT_PAREN
      let call =
        ID.and(LEFT_PAREN.and(args.and(RIGHT_PAREN)))
</code></pre>
<p>You can write a test like this:</p>
<pre><code class="lang-javascript">let node = call.parseStringToCompletion("f(x)");
console.assert(node.equals(new Call("f", new Id("x"))));
</code></pre>
<p>Apart from the <a href="https://bford.info/pub/lang/peg.pdf">paper</a> (wich is quite approachable, as I remember), maybe this Wikipedia example could be of some help?</p>
<aside class="onebox wikipedia">
  <header class="source">
      <a href="https://en.wikipedia.org/wiki/Parsing_expression_grammar#Examples" target="_blank">en.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="https://en.wikipedia.org/wiki/Parsing_expression_grammar#Examples" target="_blank">Parsing expression grammar | Examples</a></h3>

<p>This is a PEG that recognizes mathematical formulas that apply the basic five operations to non-negative integers.
 In the above example, the terminal symbols are characters of text, represented by characters in single quotes, such as '(' and ')'. The range [0-9] is also a shortcut for ten characters, indicating any one of the digits 0 through 9. (This range syntax is the same as the syntax used by regular expressions.) The nonterminal symbols are the ones that expand to other rules: Value, Power...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/gengjiawen'><span itemprop='name'>gengjiawen</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-13T02:42:46Z' class='post-time'>
                January 13, 2021,  2:42am
              </time>
              <meta itemprop='dateModified' content='2021-01-13T02:42:46Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks，this is more clear.</p>
<p>Maybe we can reorganise book split every PEG rule with code and test.</p>
<p>This surely helps for readers like me.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Compiling to Assembly from Scratch'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://discourse.keleshev.com/uploads/default/original/1X/7ed43fb87ad00ed48afdea6909c7967841dd7158.jpeg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.keleshev.com/u/keleshev'><span itemprop='name'>keleshev</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="110.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-13T07:44:30Z' class='post-time'>
                January 13, 2021,  7:44am
              </time>
              <meta itemprop='dateModified' content='2021-01-13T07:44:30Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>Maybe we can reorganise book split every PEG rule with code and test.</p>
</blockquote>
<p>Maybe this is the way to go; I’ll have to think about that.</p>
        </div>

        <meta itemprop='headline' content='Expression parser understand'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
